(()=>{"use strict";var e;function n(e,t){e=document.getElementById(e);e.querySelector(".alert-message").innerText=t,gsap.to(e,{display:"block",opacity:1,duration:.3})}function r(){gsap.to("#hero",{display:"none",opacity:0,duration:.3,onComplete:()=>{gsap.to("#collaborators",{display:"block",opacity:1,duration:.2})}})}document.querySelectorAll(".alert .btn-close").forEach(t=>{t.addEventListener("click",()=>{var e=t.closest(".alert");gsap.to(e,{display:"none",opacity:0,duration:.3})})}),document.getElementById("phone")?.addEventListener("input",mask_phone),document.getElementById("cnpj")?.addEventListener("input",mask_cnpj),document.getElementById("form-budget-step-1").addEventListener("submit",e=>{e.preventDefault();var t,e=e["currentTarget"];e.checkValidity()&&(e=new FormData(e),e=e.get("email"),(t=new URL(window.location.href)).searchParams.set("email",e),window.history.replaceState({},"",t),r())}),document.getElementById("form-budget-step-2").addEventListener("submit",e=>{e.preventDefault();var t=document.querySelector("#alert-send .btn-close"),t=(t&&t.click(),e)["currentTarget"];if(t.checkValidity()){e=new FormData(t),t=window.location.href,t={email:new URL(t).searchParams.get("email"),full_name:e.get("full-name"),phone:e.get("phone").replace(/\D/g,""),cnpj:e.get("cnpj"),num_workers:Number(e.get("num_workers"))};const r=document.getElementById("send_quotation");r.setAttribute("disabled","disabled"),r.innerText="Enviando...",function(e){let t=e.replace(/\D/g,"");return t=(t=(t=t.replace(/^0/,"")).replace(/(\d{2})(\d{1})/,"($1) $2")).replace(/(\d{5})(\d{1})/,"$1-$2"),!!/\(\d{2}\)\s?\d{5}-\d{4}/.test(t)}(e.get("phone"))?!function(e){if(14!==(e=e.replace(/[^\d]+/g,"")).length)return;if(/^(.)\1+$/.test(e))return;for(var t=e.length-2,r=e.substring(0,t),n=e.substring(t),a=0,o=t-7,i=t;1<=i;i--)a+=r.charAt(t-i)*o--,o<2&&(o=9);if((a%11<2?0:11-a%11)!==parseInt(n.charAt(0)))return;t+=1,r=e.substring(0,t),a=0,o=t-7;for(var s=t;1<=s;s--)a+=r.charAt(t-s)*o--,o<2&&(o=9);return(a%11<2?0:11-a%11)===parseInt(n.charAt(1))}(e.get("cnpj"))?(r.innerText="Enviar",n("alert-send","Formato de CNPJ inválido"),r.removeAttribute("disabled")):!e.get("num_workers")||e.get("num_workers")<=0?(r.disabled=!1,r.innerText="Enviar",n("alert-send","Nº de colaboradores deve ser maior que 0"),r.removeAttribute("disabled")):fetch("https://4120qp8ra6.execute-api.us-east-1.amazonaws.com/prod/pill-pass",{method:"POST",body:JSON.stringify(t)}).then(async e=>{e=e.status;if(200!=e)throw new Error("Error ao enviar o formulário.");e="modal-success";e=document.getElementById(e),(e=new bootstrap.Modal(e)).show(),r.removeAttribute("disabled"),r.innerText="Enviar"}).catch(e=>{console.log({erro:e}),r.removeAttribute("disabled"),r.innerText="Enviar",gsap.to("#alert-error-form",{display:"block",opacity:1})}):(r.innerText="Enviar",n("alert-send","Formato de celular inválido"),r.removeAttribute("disabled"))}}),e=window.location.href,(new URL(e).searchParams.get("email")??"")&&r()})();